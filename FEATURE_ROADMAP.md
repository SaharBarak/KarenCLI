# Karen CLI Feature Roadmap

**Status:** Production-ready v1.0.0
**Date:** November 20, 2025

---

## üéØ Top Priority Features (Add These Now)

### 1. **GitHub PR Auto-Fixer** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**Value:** EXTREME - This is the killer feature
**Effort:** Medium (2-3 days)
**Why:** Transforms Karen from "find issues" to "fix issues automatically"

**Implementation:**
```typescript
// src/core/github-fixer.ts
export async function createFixPR(
  repoUrl: string,
  issues: Issue[],
  githubToken: string
): Promise<Result<string, string>> {
  // 1. Clone repo
  // 2. Create branch: karen-fixes-{timestamp}
  // 3. Apply fixes from issues[].fix.code
  // 4. Commit changes
  // 5. Create PR with Karen's sass
  // 6. Return PR URL
}
```

**CLI Usage:**
```bash
karen audit https://example.com \
  --github-repo https://github.com/user/repo \
  --github-token ghp_xxx \
  --create-pr
```

**PR Description Example:**
```markdown
# üíÖ Karen's CSS Makeover

Hi there! Karen here. I found **31 layout issues** that are making your site look like it was designed in the MySpace era. I took the liberty of fixing them for you.

## What I Fixed
- ‚úÖ 9 overflow issues (your body was bigger than your container - awkward)
- ‚úÖ 9 spacing inconsistencies (more chaotic than my ex's texting schedule)
- ‚úÖ 5 typography disasters
- ‚úÖ 1 accessibility issue (because we care about ALL users, sweetie)

## Files Changed
- `styles/layout.css` (15 fixes)
- `components/Card.tsx` (8 fixes)
- `globals.css` (8 fixes)

Merge this PR and your site will finally look professional. You're welcome.

---
üíÖ Generated by Karen CLI v1.0.0
```

---

### 2. **Watch Mode / Dev Server Integration** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**Value:** HIGH - Real-time feedback during development
**Effort:** Medium (2-3 days)
**Why:** Developers want instant feedback like ESLint

**Implementation:**
```bash
# Watch mode
karen watch http://localhost:3000 --config karen.config.js

# Auto-reload on file changes
# Show issues in terminal with live updates
# Optional: VS Code extension integration
```

**Features:**
- File watcher on `src/` directory
- Debounced re-audit (500ms delay)
- Terminal UI with live issue count
- Desktop notifications for critical issues
- Integration with dev servers (Vite, Next.js, etc.)

---

### 3. **CI/CD GitHub Action** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**Value:** HIGH - Automated quality gates
**Effort:** Low (1 day)
**Why:** Prevent layout issues from reaching production

**Implementation:**
```yaml
# .github/workflows/karen-audit.yml
name: Karen CSS Audit
on: [push, pull_request]

jobs:
  audit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: karen-cli/audit-action@v1
        with:
          url: https://preview-${{ github.sha }}.vercel.app
          api-key: ${{ secrets.ANTHROPIC_API_KEY }}
          fail-on: high
          create-comment: true  # Comment on PR with results
```

**GitHub Action Features:**
- Audit preview deployments
- Comment on PRs with Karen's sass
- Fail builds if critical/high issues found
- Upload artifacts (screenshots, reports)

---

### 4. **Performance Metrics (Core Web Vitals)** ‚≠ê‚≠ê‚≠ê‚≠ê
**Value:** HIGH - Adds new detector category
**Effort:** Medium (2-3 days)
**Why:** Layout issues often cause performance problems

**New Detector: `performance.ts`**
```typescript
export function detectPerformanceIssues(
  snapshots: ViewportSnapshot[],
  config: KarenConfig
): Issue[] {
  // Measure:
  // - LCP (Largest Contentful Paint) - target < 2.5s
  // - CLS (Cumulative Layout Shift) - target < 0.1
  // - FID (First Input Delay) - target < 100ms
  // - INP (Interaction to Next Paint)
  // - TTFB (Time to First Byte)

  // Detect:
  // - Images without width/height (causes CLS)
  // - Missing font-display (causes FOIT/FOUT)
  // - Large layout shifts
  // - Slow render-blocking resources
}
```

**Karen's Messages:**
- "Your LCP is slower than my ex responding to texts - 4.2 seconds? Really?"
- "This layout shift gave me whiplash! CLS of 0.35 is unacceptable."
- "Font loading is causing more flashes than a paparazzi convention."

---

### 5. **Image Optimization Detector** ‚≠ê‚≠ê‚≠ê‚≠ê
**Value:** HIGH - Images are often the biggest offender
**Effort:** Low (1-2 days)
**Why:** Easy wins for users

**New Detector: `images.ts`**
```typescript
export function detectImageIssues(
  snapshots: ViewportSnapshot[],
  config: KarenConfig
): Issue[] {
  // Detect:
  // - Images without alt text (accessibility)
  // - Images larger than container (wasting bandwidth)
  // - Missing width/height attributes (CLS)
  // - Wrong format (JPG for transparency, PNG for photos)
  // - Missing srcset for responsive images
  // - Unoptimized file sizes (compare vs ideal)
}
```

**Fix Suggestions:**
```css
/* Before */
<img src="photo.png" />

/* After */
<img
  src="photo.webp"
  srcset="photo-320.webp 320w, photo-640.webp 640w, photo-1280.webp 1280w"
  sizes="(max-width: 768px) 100vw, 50vw"
  width="800"
  height="600"
  alt="Product photo showing..."
  loading="lazy"
/>
```

---

### 6. **HTML Report with Visual Diff** ‚≠ê‚≠ê‚≠ê‚≠ê
**Value:** MEDIUM - Better than Markdown for sharing
**Effort:** Medium (2-3 days)
**Why:** Clients/managers prefer visual reports

**Implementation:**
```bash
karen audit https://example.com --html report.html
```

**HTML Report Features:**
- Interactive issue browser
- Screenshot annotations (highlight problem elements)
- Before/after code diff viewer
- Filter by severity/type/viewport
- Export to PDF
- Shareable URL (optional)

**Tech Stack:**
- HTML template with vanilla JS (no framework)
- Syntax highlighting (Prism.js)
- Screenshots with overlay markers
- Responsive design (ironic, right?)

---

## üöÄ High-Value Features (Next Sprint)

### 7. **Link Checker**
**Effort:** Low (1 day)
Detect broken links, 404s, redirect chains

### 8. **Animation Accessibility Detector**
**Effort:** Low (1 day)
Detect animations without `prefers-reduced-motion`

### 9. **Z-Index Chaos Detector**
**Effort:** Medium (2 days)
Detect z-index hell (gaps, overlapping contexts)

### 10. **Grid/Flexbox Best Practices**
**Effort:** Medium (2 days)
Detect anti-patterns in layout systems

---

## üí∞ Monetization Features (Managed Service)

### 11. **Scheduled Audits with Alerts**
**Why:** Recurring revenue
**Implementation:** Cron job + email/Slack webhooks

```bash
# Backend cron (every Monday 9am)
karen audit https://example.com \
  --compare-previous \
  --alert-on-regression \
  --slack-webhook $WEBHOOK_URL
```

### 12. **Historical Tracking Dashboard**
**Why:** Enterprise customers need trends
**Implementation:** Store audit history, show charts

**Dashboard Features:**
- Issue count over time (line chart)
- Issue breakdown by type (pie chart)
- Regression detection (new issues since last audit)
- Team collaboration (assign issues to developers)

### 13. **Multi-Site Monitoring**
**Why:** Agencies need portfolio monitoring
**Implementation:** Batch audit multiple sites

```bash
karen audit-batch \
  --sites sites.json \
  --output dashboard/
```

---

## üé® UX Improvements

### 14. **Interactive Config Generator**
```bash
karen init
? What spacing scale do you use? (8px, 4px, custom)
? What are your brand colors? (#FF5733, #33FF57)
? What breakpoints? (mobile, tablet, desktop, custom)
? Enable AI analysis? (Yes)

‚úÖ Created karen.config.js
```

### 15. **Better Terminal UI**
- Progress bars for each viewport
- Emoji-based severity indicators
- Color-coded issue types
- Summary dashboard in terminal

### 16. **VS Code Extension**
```json
{
  "name": "karen-vscode",
  "features": [
    "Inline squiggles for CSS issues",
    "Hover tooltips with Karen's sass",
    "Code actions for auto-fixes",
    "Status bar with issue count"
  ]
}
```

---

## üß™ Advanced Features (Future)

### 17. **Machine Learning - Custom Patterns**
Train Karen to detect YOUR design system violations

### 18. **Component Library Audit**
Audit Storybook/Component libraries directly

### 19. **Figma Integration**
Compare design files vs implementation

### 20. **A/B Test Impact Analysis**
Measure layout quality impact on conversions

---

## üìä Recommendation: What to Build First

### Phase 1 (Week 1-2): **The Essentials**
1. ‚úÖ **GitHub PR Auto-Fixer** - The killer feature
2. ‚úÖ **CI/CD GitHub Action** - Easy distribution
3. ‚úÖ **Performance Detector** - Adds major value

**Why:** These three features transform Karen from "nice tool" to "must-have tool"

### Phase 2 (Week 3-4): **Developer Experience**
4. ‚úÖ **Watch Mode** - Real-time feedback
5. ‚úÖ **Image Optimization** - Easy wins
6. ‚úÖ **HTML Reports** - Better sharing

**Why:** Makes Karen indispensable during development

### Phase 3 (Month 2): **Monetization**
7. ‚úÖ **Scheduled Audits** - Recurring revenue
8. ‚úÖ **Historical Dashboard** - Enterprise value
9. ‚úÖ **Multi-Site Monitoring** - Agency/enterprise

**Why:** Enables SaaS business model

---

## üéØ My Recommendation for RIGHT NOW

**Build these 3 features in this order:**

### 1Ô∏è‚É£ **GitHub PR Auto-Fixer** (Start Today)
- Most requested feature
- Highest ROI
- Differentiator from competitors
- Enables "fix it for me" value prop

### 2Ô∏è‚É£ **Performance Detector** (2-3 days)
- Adds 10th detector (nice milestone)
- Core Web Vitals are hot topic
- Complements existing detectors
- Easy to market ("Karen now does performance!")

### 3Ô∏è‚É£ **CI/CD GitHub Action** (1 day)
- Easy to build
- Massive distribution channel
- Developers love GitHub Actions
- Sets up recurring usage

---

## üí° Quick Wins (< 4 hours each)

While building above, add these:
- ‚úÖ `--json-only` flag (skip markdown)
- ‚úÖ `--quiet` flag (less verbose)
- ‚úÖ `--fail-on <severity>` (exit code for CI)
- ‚úÖ Emoji support toggle (`--no-emoji`)
- ‚úÖ Progress bar (instead of spinner)
- ‚úÖ Color themes for terminal output

---

## What Should We Build?

**My recommendation:** Start with **GitHub PR Auto-Fixer**.

**Why?**
1. It's what users want most
2. It's the "wow" feature for demos
3. It enables the pitch: "Karen fixes your CSS while you sleep"
4. It's a competitive advantage
5. It unlocks SaaS pricing ("auto-fix" tier)

**Implementation Plan:**
```bash
Day 1: Clone repo, create branch, parse issues
Day 2: Apply fixes, commit changes
Day 3: Create PR with Karen's sass, test edge cases
```

Want me to start building the GitHub PR Auto-Fixer now?
